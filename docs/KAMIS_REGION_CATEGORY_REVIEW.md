# KAMIS API μ§€μ—­λ³„ μΉ΄ν…κ³ λ¦¬ κΈ°λ¥ κ²€ν† 

## π“‹ κ²€ν†  κ²°κ³Ό μ”μ•½

**κ²°λ΅ : μ§€μ—­λ³„ μΉ΄ν…κ³ λ¦¬ κΈ°λ¥ μ¶”κ°€ κ°€λ¥**

KAMIS APIλ” `p_countycode` νλΌλ―Έν„°λ¥Ό ν†µν•΄ μ§€μ—­λ³„ ν•„ν„°λ§μ„ μ§€μ›ν•λ©°, μ§€μ—­λ³„ μΉ΄ν…κ³ λ¦¬ κΈ°λ¥μ„ κµ¬ν„ν•  μ μμµλ‹λ‹¤.

## π” ν„μ¬ μƒν™© λ¶„μ„

### 1. KAMIS API μ§€μ—­ μ§€μ› ν„ν™©

- **μ§€μ› νλΌλ―Έν„°**: `p_countycode` (μ§€μ—­μ½”λ“)
- **μ§€μ—­ μ½”λ“ ν•μ‹**: μ«μ μ½”λ“ (μ: μ„μΈ `1101`)
- **ν„μ¬ κµ¬ν„**: `p_countycode` νλΌλ―Έν„°κ°€ λΉ λ¬Έμμ—΄λ΅ μ„¤μ •λμ–΄ μ „μ²΄ μ§€μ—­ μ΅°ν

### 2. μ‘λ‹µ λ°μ΄ν„° κµ¬μ΅°

ν„μ¬ μ‘λ‹µ λ°μ΄ν„°μ—λ”:
- β… `category_code`, `category_name`: μΉ΄ν…κ³ λ¦¬ μ •λ³΄ (μ‹λ‰μ‘λ¬Ό, μ±„μ†λ¥, κ³ΌμΌλ¥ λ“±)
- β… `product_cls_code`, `product_cls_name`: μ ν• μ •λ³΄ (μ†λ§¤, λ„λ§¤)
- β“ μ§€μ—­ μ •λ³΄: λ…μ‹μ μΌλ΅ ν¬ν•¨λμ§€ μ•μ (μ‹μ¥λ…μ—μ„ μ¶”λ΅  κ°€λ¥)

### 3. ν”„λ΅μ νΈ λ‚΄ μ§€μ—­ κ΄€λ ¨ μΈν”„λΌ

- β… `lib/constants/regions.ts`: μ‹/λ„ λ° μ‹/κµ°/κµ¬ λ©λ΅ μ •μλ¨
- β… μ§€μ—­ ν•„ν„°λ§ λ΅μ§: `lib/market-api.ts`μ— μ‹μ¥λ…-μ§€μ—­ λ§¤ν•‘ μ΅΄μ¬
- β… UI μ»΄ν¬λ„νΈ: μƒν’ νμ΄μ§€μ— μ§€μ—­ ν•„ν„° UI μ΅΄μ¬

## π’΅ κµ¬ν„ λ°©μ•

### λ°©μ• 1: API νλΌλ―Έν„° ν™μ© (κ¶μ¥)

**μ¥μ :**
- API λ λ²¨μ—μ„ ν•„ν„°λ§λμ–΄ ν¨μ¨μ 
- μ •ν™•ν• μ§€μ—­λ³„ λ°μ΄ν„° μ΅°ν κ°€λ¥

**λ‹¨μ :**
- μ§€μ—­ μ½”λ“ λ§¤ν•‘ ν…μ΄λΈ” ν•„μ”
- μ—¬λ¬ μ§€μ—­ μ΅°ν μ‹ API νΈμ¶ μ¦κ°€

**κµ¬ν„ λ°©λ²•:**
```typescript
// μ§€μ—­ μ½”λ“ μμ‹
μ„μΈ: 1101
λ¶€μ‚°: 2601
λ€κµ¬: 2701
μΈμ²: 2801
...
```

### λ°©μ• 2: ν΄λΌμ΄μ–ΈνΈ μΈ΅ ν•„ν„°λ§

**μ¥μ :**
- λ‹¨μΌ API νΈμ¶λ΅ λ¨λ“  μ§€μ—­ λ°μ΄ν„° μ΅°ν
- κµ¬ν„μ΄ κ°„λ‹¨

**λ‹¨μ :**
- λ¶ν•„μ”ν• λ°μ΄ν„° μ „μ†΅
- λ€λ‰ λ°μ΄ν„° μ²λ¦¬ μ‹ μ„±λ¥ μ΄μ κ°€λ¥

**κµ¬ν„ λ°©λ²•:**
- μ‹μ¥λ…(`p_marketname`)μ„ κΈ°λ°μΌλ΅ μ§€μ—­ μ¶”λ΅ 
- κΈ°μ΅΄ `lib/market-api.ts`μ μ‹μ¥λ…-μ§€μ—­ λ§¤ν•‘ ν™μ©

### λ°©μ• 3: ν•μ΄λΈλ¦¬λ“ λ°©μ‹ (μµμ )

**κµ¬ν„ λ°©λ²•:**
1. μ „μ²΄ μ§€μ—­ μ΅°ν (κΈ°λ³Έ)
2. μ§€μ—­ μ„ νƒ μ‹ ν•΄λ‹Ή μ§€μ—­λ§ ν•„ν„°λ§
3. μ‹μ¥λ… κΈ°λ° μ§€μ—­ μ¶”λ΅ μΌλ΅ κ·Έλ£Ήν™”

## π― μ¶”μ² κµ¬ν„ κ³„ν

### Phase 1: μ§€μ—­ ν•„ν„° νλΌλ―Έν„° μ¶”κ°€

1. **API μ—”λ“ν¬μΈνΈ μμ •**
   - `p_countycode` νλΌλ―Έν„°λ¥Ό μ„ νƒμ μΌλ΅ λ°›λ„λ΅ μμ •
   - μ§€μ—­ μ½”λ“ λ§¤ν•‘ μ ν‹Έλ¦¬ν‹° ν•¨μ μ¶”κ°€

2. **μ§€μ—­ μ½”λ“ λ§¤ν•‘ ν…μ΄λΈ” μƒμ„±**
   - μ‹/λ„ β†’ KAMIS μ§€μ—­ μ½”λ“ λ§¤ν•‘
   - μ: `{ "μ„μΈ": "1101", "λ¶€μ‚°": "2601", ... }`

### Phase 2: UIμ— μ§€μ—­ μ„ νƒ κΈ°λ¥ μ¶”κ°€

1. **μ§€μ—­ μ„ νƒ λ“λ΅­λ‹¤μ΄ μ¶”κ°€**
   - `lib/constants/regions.ts` ν™μ©
   - "μ „μ²΄" μµμ… ν¬ν•¨

2. **μ§€μ—­λ³„ μΉ΄ν…κ³ λ¦¬ κ·Έλ£Ήν™”**
   - μ‘λ‹µ λ°μ΄ν„°λ¥Ό μ§€μ—­λ³„λ΅ κ·Έλ£Ήν™”
   - μ§€μ—­λ³„ νƒ­ λλ” μ„Ήμ…μΌλ΅ ν‘μ‹

### Phase 3: μ„±λ¥ μµμ ν™”

1. **μΊμ‹± μ „λµ**
   - μ§€μ—­λ³„ λ°μ΄ν„° μΊμ‹±
   - TTL μ„¤μ • (μ: 1μ‹κ°„)

2. **λ΅λ”© μƒνƒ κ΄€λ¦¬**
   - μ§€μ—­ λ³€κ²½ μ‹ λ΅λ”© μΈλ””μΌ€μ΄ν„°
   - μ—λ¬ μ²λ¦¬

## π“ ν•„μ”ν• μ‘μ—…

### 1. μ§€μ—­ μ½”λ“ λ§¤ν•‘ ν…μ΄λΈ” μƒμ„±

```typescript
// lib/constants/kamis-region-codes.ts
export const KAMIS_REGION_CODES: Record<Region, string> = {
  μ„μΈ: "1101",
  λ¶€μ‚°: "2601",
  λ€κµ¬: "2701",
  μΈμ²,
};
```

### 2. API μ—”λ“ν¬μΈνΈ μμ •

```typescript
// app/api/test/kamis/route.ts
const countyCode = searchParams.get("countyCode") || "";
const params = new URLSearchParams({
  // ...,
  p_countycode: countyCode, // μ§€μ—­ μ½”λ“ μ¶”κ°€
});
```

### 3. UI μ»΄ν¬λ„νΈ μμ •

- μ§€μ—­ μ„ νƒ λ“λ΅­λ‹¤μ΄ μ¶”κ°€
- μ§€μ—­λ³„ λ°μ΄ν„° κ·Έλ£Ήν™” λ° ν‘μ‹

## β οΈ μ£Όμμ‚¬ν•­

1. **μ§€μ—­ μ½”λ“ ν™•μΈ ν•„μ”**
   - KAMIS API κ³µμ‹ λ¬Έμ„μ—μ„ μ •ν™•ν• μ§€μ—­ μ½”λ“ ν™•μΈ
   - ν…μ¤νΈλ¥Ό ν†µν•΄ μ‹¤μ  μ‘λ™ μ—¬λ¶€ ν™•μΈ

2. **API νΈμ¶ μ ν•**
   - μ—¬λ¬ μ§€μ—­ μ΅°ν μ‹ API νΈμ¶ νμ μ¦κ°€
   - Rate Limiting κ³ λ ¤ ν•„μ”

3. **λ°μ΄ν„° μΌκ΄€μ„±**
   - μ§€μ—­ μ½”λ“κ°€ μ—†λ” κ²½μ° μ „μ²΄ μ΅°νλ΅ ν΄λ°±
   - μ—λ¬ μ²λ¦¬ λ° μ‚¬μ©μ ν”Όλ“λ°±

## π”— μ°Έκ³  μλ£

- [KAMIS Open API μ΄μ©μ•λ‚΄](https://www.kamis.or.kr/customer/reference/openapi_list.do)
- ν”„λ΅μ νΈ λ‚΄ μ§€μ—­ μƒμ: `lib/constants/regions.ts`
- κΈ°μ΅΄ μ§€μ—­ ν•„ν„°λ§ λ΅μ§: `lib/market-api.ts`

